{"version":3,"sources":["cEngine.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length","1","module","global","cEngine","version","create","config","Engine","stepTimeThen","stepTimeNow","stepTimeElapsed","isRunning","canvas","undefined","context","pluginList","requestAnimationFrameId","init","createDomElement","createPluginList","callPlugins","start","loop","stop","window","cancelAnimationFrame","stepFn","Date","getTime","autoClear","clear","width","height","step","_public_","plugins","clearRect","requestAnimationFrame","document","createElement","domElement","appendChild","getContext","style","setStyle","resizeTo","destroy","remove","property","fn","params","forEach","plugin","apply","hasOwnProperty","cEnginePlugin","push","Object","assign","body","count","extend","id","./vendors/polyfils","2","target","TypeError","output","index","arguments","source","nextKey"],"mappings":"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","file":"cEngine-min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nrequire('./vendors/polyfils');\n\n/**\n *  Canvas engine with plugin capabilities.\n *  @param {object} global - window or this\n */\n(function (global) {\n\n  /**\n   *  Global namesapce\n   *  @global\n   */\n  var cEngine = {\n\n    /**\n     *  The version.\n     *  @type {string}\n     */\n    version: '0.1.11',\n\n    /**\n     *  Factory for a new cEninge instance.\n     *  @public\n     *  @param {object=} config - config for engine\n     *  @return {object} eEngine instance\n     */\n    create: function create(config) {\n\n      /**\n       *  The cEngine instance.\n       *  @private\n       *  @instance\n       *  @type {object}\n       */\n      var Engine = {\n\n        /**\n         *  Time of last step\n         *  @type {date}\n         */\n        stepTimeThen: 0,\n\n        /**\n         *  Time of step\n         *  @type {date}\n         */\n        stepTimeNow: 0,\n\n        /**\n         *  Elapsed time since last step\n         *  @type {number}\n         */\n        stepTimeElapsed: 0,\n\n        /**\n         *  is engine running\n         *  @type {bool}\n         */\n        isRunning: false,\n\n        /**\n         *  canvas dom element\n         *  @type {HTMLElement}\n         */\n        canvas: undefined,\n\n        /**\n         *  canvas 2d context\n         *  @type {CanvasRenderingContext2D}\n         */\n        context: undefined,\n\n        /**\n         *  shorthand list of all plugins\n         *  @type {array}\n         */\n        pluginList: [],\n\n        /**\n         *  shorthand list of all plugins\n         *  @type {number}\n         */\n        requestAnimationFrameId: undefined,\n\n        /**\n         *  Initialize canvas engine.\n         */\n        init: function init() {\n          Engine.createDomElement();\n          Engine.createPluginList();\n          Engine.callPlugins('init', [Engine]);\n        },\n\n        /**\n         *  Starts the engine by calling the loop.\n         */\n        start: function start() {\n          Engine.isRunning = true;\n          Engine.stepTimeElapsed = 0;\n          Engine.stepTimeNow = 0;\n          Engine.stepTimeThen = 0;\n          Engine.callPlugins('start');\n          Engine.loop();\n        },\n\n        /**\n         *  Stops the engine.\n         */\n        stop: function stop() {\n          Engine.isRunning = false;\n          Engine.stepTimeElapsed = 0;\n          Engine.stepTimeNow = 0;\n          Engine.stepTimeThen = 0;\n\n          if (Engine.requestAnimationFrameId) {\n            window.cancelAnimationFrame(Engine.requestAnimationFrameId);\n          }\n\n          Engine.callPlugins('stop');\n        },\n\n        /**\n         *  Hanlder for every loop step.\n         */\n        stepFn: function stepFn() {\n\n          Engine.stepTimeNow = new Date().getTime();\n\n          if (Engine.stepTimeThen !== 0) {\n            Engine.stepTimeElapsed = Engine.stepTimeNow - Engine.stepTimeThen;\n          }\n\n          if (Engine.autoClear) {\n            Engine.clear();\n          }\n\n          Engine.callPlugins('preStep', [Engine.context, Engine.canvas.width, Engine.canvas.height, Engine.stepTimeElapsed]);\n\n          Engine.step.call(_public_, Engine.context, Engine.canvas.width, Engine.canvas.height, Engine.stepTimeElapsed, Engine.plugins);\n\n          Engine.callPlugins('postStep', [Engine.context, Engine.canvas.width, Engine.canvas.height, Engine.stepTimeElapsed]);\n\n          Engine.stepTimeThen = Engine.stepTimeNow;\n        },\n\n        /**\n         *  Clears the canvas context.\n         */\n        clear: function clear() {\n          Engine.context.clearRect(0, 0, Engine.canvas.width, Engine.canvas.height);\n        },\n\n        /**\n         *  Engine loop.\n         */\n        loop: function loop() {\n          if (Engine.isRunning) {\n\n            Engine.stepFn();\n\n            Engine.requestAnimationFrameId = window.requestAnimationFrame(Engine.loop);\n          }\n        },\n\n        /**\n         *  Initialize Canvas and attach to dom element.\n         */\n        createDomElement: function createDomElement() {\n          Engine.canvas = document.createElement('canvas');\n\n          Engine.domElement.appendChild(Engine.canvas);\n\n          Engine.context = Engine.canvas.getContext('2d');\n\n          if (Engine.style) {\n            Engine.setStyle(Engine.style);\n          }\n\n          Engine.resizeTo(Engine.width || Engine.canvas.width, Engine.height || Engine.canvas.height);\n        },\n\n        /**\n         *  Remove all engine garbage so garbage collection can \n         *  clear all and Dom is clean.\n         */\n        destroy: function destroy() {\n          Engine.callPlugins('destroy');\n          Engine.canvas.remove();\n        },\n\n        /**\n         *  Set Canvas Style.\n         *  @param {object} style - style\n         */\n        setStyle: function setStyle(style) {\n          for (var property in style) {\n            Engine.canvas.style[property] = style[property];\n          }\n        },\n\n        /**\n         *  Resize to width and height.\n         *  @param {number} width - width\n         *  @param {number} height - height\n         */\n        resizeTo: function resizeTo(width, height) {\n          Engine.width = Engine.canvas.width = width;\n          Engine.height = Engine.canvas.height = height;\n        },\n\n        /**\n         *  Call function of all plugins.\n         *  @param {string} fn - function name\n         *  @param {array} params - array of all call arguments\n         */\n        callPlugins: function callPlugins(fn, params) {\n          Engine.pluginList.forEach(function (plugin) {\n            if (plugin[fn]) {\n              plugin[fn].apply(undefined, params);\n            }\n          });\n        },\n\n        /**\n         *  Create shorthand plugin list for faster access.\n         */\n        createPluginList: function createPluginList() {\n          for (var plugin in Engine.plugins) {\n            if (Engine.plugins.hasOwnProperty(plugin) && typeof Engine.plugins[plugin] != 'undefined' && typeof Engine.plugins[plugin].cEnginePlugin != 'undefined') {\n\n              Engine.pluginList.push(Engine.plugins[plugin]);\n            }\n          }\n        }\n      };\n\n      Object.assign(Engine, {\n\n        /**\n         *  parent dom element to attach to\n         *  @type {HTMLElement}\n         */\n        domElement: document.body,\n\n        /**\n         *  should canvas be cleared every step\n         *  @type {bool}\n         */\n        autoClear: false,\n\n        /**\n         *  callback for every step\n         *  @type {function}\n         */\n        step: undefined,\n\n        /**\n         *  canvas width\n         *  @type {number}\n         */\n        width: undefined,\n\n        /**\n         *  canvas height\n         *  @type {number}\n         */\n        height: undefined,\n\n        /**\n         *  canvas style\n         *  @type {object}\n         */\n        style: undefined,\n\n        /**\n         *  object containing all plugins\n         *  @type {object} \n         */\n        plugins: {}\n\n      }, config);\n\n      Engine.init();\n\n      /**\n       *  Public interface for engine\n       *  @public\n       */\n      var _public_ = {\n\n        /**\n         *  All Plugins\n         *  @type {object}\n         */\n        plugins: Engine.plugins,\n\n        /**\n         *  Stop engine.\n         *  @return {object} engine instance\n         */\n        stop: function stop() {\n          Engine.stop();\n          return _public_;\n        },\n\n        /**\n         *  Calls engine step one time or how \n         *  many time count param says.\n         *  @param {number} [count=2] - how many steps\n         *  @return {object} engine instance\n         */\n        step: function step(count) {\n          if (count && count > 1) {\n\n            Engine.stepFn();\n            return _public_.step(--count);\n          } else {\n\n            Engine.stepFn();\n            return _public_;\n          }\n        },\n\n        /**\n         *  Starts engine.\n         *  @return {object} engine instance\n         */\n        start: function start() {\n          Engine.start();\n          return _public_;\n        },\n\n        /**\n         *  Clears Context of engine.\n         *  @return {object} engine instance\n         */\n        clear: function clear() {\n          Engine.clear();\n          return _public_;\n        },\n\n        /**\n         *  Destoys engine.\n         */\n        destroy: function destroy() {\n          Engine.stop();\n          Engine.destroy();\n          Engine = undefined;\n        }\n      };\n\n      return _public_;\n    },\n\n    /**\n     *  Extend cEngine with plugin.\n     *  @param {string} id - id of plugin, \n     *    eg 'filter' -> cEngine.filter\n     *  @param {object} plugin - plugin\n     *  @throws {Error} error\n     */\n    extend: function extend(id, plugin) {\n      if (typeof id === 'undefined' || typeof plugin === 'undefined') {\n\n        throw new Error('id or plugin is undefined!');\n      } else if (id === '') {\n\n        throw new Error('id is empty!');\n      } else if (cEngine[id]) {\n\n        throw new Error('skiped cEngine-plugin [' + id + ']. ' + 'Maybe already attached or uses intern blocked ' + 'name like \"create\", \"extend\" or \"version\"!');\n      } else if (typeof plugin.create === 'undefined') {\n\n        throw new Error('plugin has no create function!');\n      } else {\n        cEngine[id] = plugin;\n      }\n    }\n  };\n\n  global.cEngine = cEngine;\n})(typeof window !== 'undefined' ? window : undefined);\n},{\"./vendors/polyfils\":2}],2:[function(require,module,exports){\n// Polyfils\n\n/**\n *  Object.assign polyfil\n *  @by https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n */\nif (typeof Object.assign != 'function') {\n  (function () {\n    Object.assign = function (target) {\n      'use strict';\n      if (target === undefined || target === null) {\n        throw new TypeError('Cannot convert undefined or null to object');\n      }\n\n      var output = Object(target);\n      for (var index = 1; index < arguments.length; index++) {\n        var source = arguments[index];\n        if (source !== undefined && source !== null) {\n          for (var nextKey in source) {\n            if (source.hasOwnProperty(nextKey)) {\n              output[nextKey] = source[nextKey];\n            }\n          }\n        }\n      }\n      return output;\n    };\n  })();\n}\n},{}]},{},[1])"],"sourceRoot":"/source/"}