{"version":3,"sources":["cEngine.input.js"],"names":["e","t","n","r","s","o","u","a","require","i","Error","f","exports","call","length","1","module","cEngine","inputPlugin","create","config","input","cEnginePlugin","name","version","onTouch","engine","undefined","keys","touches","mouseIsTouching","mouseTouch","init","canvas","addEventListener","touchmove","mousemove","mousedown","window","document","mouseup","onKeydown","onKeyup","postStep","getCanvasPosition","index","destroy","removeEventListener","event","which","preventDefault","stopImmediatePropagation","targetTouches","KeyCode","keyCode","rect","getBoundingClientRect","newEvent","x","clientX","left","y","clientY","top","useResolutionDevider","resolutionDevider","27","32","37","38","39","40","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","extend"],"mappings":"CAAA,QAAUA,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,GAAkB,kBAATC,UAAqBA,OAAQ,KAAIF,GAAGC,EAAE,MAAOA,GAAEF,GAAE,EAAI,IAAGI,EAAE,MAAOA,GAAEJ,GAAE,EAAI,MAAM,IAAIK,OAAM,uBAAuBL,EAAE,KAAK,GAAIM,GAAET,EAAEG,IAAIO,WAAYX,GAAEI,GAAG,GAAGQ,KAAKF,EAAEC,QAAQ,SAASZ,GAAG,GAAIE,GAAED,EAAEI,GAAG,GAAGL,EAAG,OAAOI,GAAEF,EAAEA,EAAEF,IAAIW,EAAEA,EAAEC,QAAQZ,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGO,QAAkD,IAAI,GAA1CH,GAAkB,kBAATD,UAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEW,OAAOT,IAAID,EAAED,EAAEE,GAAI,OAAOD,KAAKW,GAAG,SAASP,EAAQQ,EAAOJ,GACrb,cAIA,SAAWK,GAET,GAAIC,IAEFC,OAAQ,SAAgBC,GACtBA,EAASA,KAET,IAAIC,IAEFC,eACEC,KAAM,cACNC,QAAS,SAGXC,QAASL,EAAOK,SAAW,aAE3BC,OAAQC,OACRC,QACAC,WACAC,iBAAiB,EACjBC,WAAYJ,OAEZK,KAAM,SAAcN,GAClBL,EAAMK,OAASA,EAEfL,EAAMK,OAAOO,OAAOC,iBAAiB,YAAab,EAAMc,WACxDd,EAAMK,OAAOO,OAAOC,iBAAiB,aAAcb,EAAMc,WAEzDd,EAAMK,OAAOO,OAAOC,iBAAiB,YAAab,EAAMe,WACxDf,EAAMK,OAAOO,OAAOC,iBAAiB,YAAab,EAAMgB,WACxDC,OAAOC,SAASL,iBAAiB,UAAWb,EAAMmB,SAElDF,OAAOC,SAASL,iBAAiB,UAAWb,EAAMoB,WAClDH,OAAOC,SAASL,iBAAiB,QAASb,EAAMqB,UAGlDC,SAAU,WAMR,GALItB,EAAMU,aACRV,EAAMI,QAAQJ,EAAMuB,kBAAkBvB,EAAMU,aAC5CV,EAAMU,WAAaJ,QAGjBN,EAAMQ,QAAQf,OAAS,EAAG,CAC5B,IAAK,GAAI+B,GAAQ,EAAGA,EAAQxB,EAAMQ,QAAQf,OAAQ+B,IAChDxB,EAAMI,QAAQJ,EAAMuB,kBAAkBvB,EAAMQ,QAAQgB,IAEtDxB,GAAMQ,aAIViB,QAAS,WACPzB,EAAMK,OAAOO,OAAOc,oBAAoB,YAAa1B,EAAMe,WAC3Df,EAAMK,OAAOO,OAAOc,oBAAoB,YAAa1B,EAAMgB,WAC3DC,OAAOC,SAASQ,oBAAoB,UAAW1B,EAAMmB,SACrDnB,EAAMK,OAAOO,OAAOc,oBAAoB,aAAc1B,EAAMc,WAC5Dd,EAAMK,OAAOO,OAAOc,oBAAoB,YAAa1B,EAAMc,WAC3DG,OAAOC,SAASQ,oBAAoB,UAAW1B,EAAMoB,WACrDH,OAAOC,SAASQ,oBAAoB,QAAS1B,EAAMqB,UAGrDL,UAAW,SAAmBW,GAC5B,GAAmB,GAAfA,EAAMC,MAKR,MAJAD,GAAME,iBACNF,EAAMG,2BACN9B,EAAMS,iBAAkB,EACxBT,EAAMU,WAAaiB,GACZ,GAIXZ,UAAW,SAAmBY,GAC5B,GAAmB,GAAfA,EAAMC,MAIR,MAHAD,GAAME,iBACNF,EAAMG,2BACF9B,EAAMS,kBAAiBT,EAAMU,WAAaiB,IACvC,GAIXR,QAAS,SAAiBQ,GACxB,GAAmB,GAAfA,EAAMC,MAKR,MAJAD,GAAME,iBACNF,EAAMG,2BACN9B,EAAMU,WAAaiB,EACnB3B,EAAMS,iBAAkB,GACjB,GAIXK,UAAW,SAAmBa,GAI5B,MAHAA,GAAME,iBACNF,EAAMG,2BACN9B,EAAMQ,QAAUmB,EAAMI,eACf,GAGTX,UAAW,SAAmBO,GAC5B3B,EAAMO,KAAKV,EAAYmC,QAAQL,EAAMM,WAAY,GAGnDZ,QAAS,SAAiBM,GACxB3B,EAAMO,KAAKV,EAAYmC,QAAQL,EAAMM,WAAY,GAGnDV,kBAAmB,SAA2BI,GAC5C,GAAIO,GAAOlC,EAAMK,OAAOO,OAAOuB,wBAC3BC,GACFC,EAAGV,EAAMW,QAAUJ,EAAKK,KACxBC,EAAGb,EAAMc,QAAUP,EAAKQ,IAQ1B,OALI1C,GAAMK,OAAOsC,uBACfP,EAASC,EAAID,EAASC,EAAIrC,EAAMK,OAAOuC,kBACvCR,EAASI,EAAIJ,EAASI,EAAIxC,EAAMK,OAAOuC,mBAGlCR,GAIX,OAAOpC,IAGTgC,SACEa,GAAI,MACJC,GAAI,QACJC,GAAI,OACJC,GAAI,KACJC,GAAI,QACJC,GAAI,OACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,IACJC,GAAI,KAIRhF,GAAQiF,OAAO,QAAShF,IACvBD,mBACQ","file":"cEngine.input-min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\n/*global cEngine */\n\n(function (cEngine) {\n\n  var inputPlugin = {\n\n    create: function create(config) {\n      config = config || {};\n\n      var input = {\n\n        cEnginePlugin: {\n          name: 'inputPlugin',\n          version: '0.0.4'\n        },\n\n        onTouch: config.onTouch || function () {},\n\n        engine: undefined,\n        keys: {},\n        touches: [],\n        mouseIsTouching: false,\n        mouseTouch: undefined,\n\n        init: function init(engine) {\n          input.engine = engine;\n\n          input.engine.canvas.addEventListener('touchmove', input.touchmove);\n          input.engine.canvas.addEventListener('touchstart', input.touchmove);\n\n          input.engine.canvas.addEventListener('mousemove', input.mousemove);\n          input.engine.canvas.addEventListener('mousedown', input.mousedown);\n          window.document.addEventListener('mouseup', input.mouseup);\n\n          window.document.addEventListener('keydown', input.onKeydown);\n          window.document.addEventListener('keyup', input.onKeyup);\n        },\n\n        postStep: function postStep() {\n          if (input.mouseTouch) {\n            input.onTouch(input.getCanvasPosition(input.mouseTouch));\n            input.mouseTouch = undefined;\n          }\n\n          if (input.touches.length > 0) {\n            for (var index = 0; index < input.touches.length; index++) {\n              input.onTouch(input.getCanvasPosition(input.touches[index]));\n            }\n            input.touches = [];\n          }\n        },\n\n        destroy: function destroy() {\n          input.engine.canvas.removeEventListener('mousemove', input.mousemove);\n          input.engine.canvas.removeEventListener('mousedown', input.mousedown);\n          window.document.removeEventListener('mouseup', input.mouseup);\n          input.engine.canvas.removeEventListener('touchstart', input.touchmove);\n          input.engine.canvas.removeEventListener('touchmove', input.touchmove);\n          window.document.removeEventListener('keydown', input.onKeydown);\n          window.document.removeEventListener('keyup', input.onKeyup);\n        },\n\n        mousedown: function mousedown(event) {\n          if (event.which == 1) {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            input.mouseIsTouching = true;\n            input.mouseTouch = event;\n            return false;\n          }\n        },\n\n        mousemove: function mousemove(event) {\n          if (event.which == 1) {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            if (input.mouseIsTouching) input.mouseTouch = event;\n            return false;\n          }\n        },\n\n        mouseup: function mouseup(event) {\n          if (event.which == 1) {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n            input.mouseTouch = event;\n            input.mouseIsTouching = false;\n            return false;\n          }\n        },\n\n        touchmove: function touchmove(event) {\n          event.preventDefault();\n          event.stopImmediatePropagation();\n          input.touches = event.targetTouches;\n          return false;\n        },\n\n        onKeydown: function onKeydown(event) {\n          input.keys[inputPlugin.KeyCode[event.keyCode]] = true;\n        },\n\n        onKeyup: function onKeyup(event) {\n          input.keys[inputPlugin.KeyCode[event.keyCode]] = false;\n        },\n\n        getCanvasPosition: function getCanvasPosition(event) {\n          var rect = input.engine.canvas.getBoundingClientRect();\n          var newEvent = {\n            x: event.clientX - rect.left,\n            y: event.clientY - rect.top\n          };\n\n          if (input.engine.useResolutionDevider) {\n            newEvent.x = newEvent.x / input.engine.resolutionDevider;\n            newEvent.y = newEvent.y / input.engine.resolutionDevider;\n          }\n\n          return newEvent;\n        }\n      };\n\n      return input;\n    },\n\n    KeyCode: {\n      27: 'ESC',\n      32: 'SPACE',\n      37: 'LEFT',\n      38: 'UP',\n      39: 'RIGHT',\n      40: 'DOWN',\n      65: 'A',\n      66: 'B',\n      67: 'C',\n      68: 'D',\n      69: 'E',\n      70: 'F',\n      71: 'G',\n      72: 'H',\n      73: 'I',\n      74: 'J',\n      75: 'K',\n      76: 'L',\n      77: 'M',\n      78: 'N',\n      79: 'O',\n      80: 'P',\n      81: 'Q',\n      82: 'R',\n      83: 'S',\n      84: 'T',\n      85: 'U',\n      86: 'V',\n      87: 'W',\n      88: 'X',\n      89: 'Y',\n      90: 'Z'\n    }\n  };\n\n  cEngine.extend('input', inputPlugin);\n})(cEngine);\n},{}]},{},[1])"],"sourceRoot":"/source/"}